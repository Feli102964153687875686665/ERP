{"ast":null,"code":"import axios from 'axios';\nconst API_URL = 'http://localhost:3001/api';\n\n// Crear instancia de axios\nconst api = axios.create({\n  baseURL: API_URL,\n  headers: {\n    'Content-Type': 'application/json'\n  },\n  maxRedirects: 5,\n  maxContentLength: 1048576,\n  maxBodyLength: 1048576\n});\n\n// Interceptor para agregar token a todas las solicitudes\napi.interceptors.request.use(config => {\n  const token = localStorage.getItem('token');\n  if (token) {\n    // Limpiar headers previos\n    if (config.headers.Authorization) {\n      delete config.headers.Authorization;\n    }\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n}, error => Promise.reject(error));\n\n// Interceptor para manejar errores de respuesta\napi.interceptors.response.use(response => response, error => {\n  var _error$response;\n  if (((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status) === 403) {\n    localStorage.removeItem('token');\n    localStorage.removeItem('usuario');\n    window.location.href = '/login';\n  }\n  return Promise.reject(error);\n});\n\n// Servicios de autenticación\nexport const authService = {\n  login: (email, password, rol) => api.post('/usuarios/auth/login', {\n    email,\n    password,\n    rol\n  }),\n  logout: () => {\n    localStorage.removeItem('token');\n    localStorage.removeItem('usuario');\n  },\n  getUser: () => JSON.parse(localStorage.getItem('usuario')),\n  getToken: () => localStorage.getItem('token')\n};\n\n// Servicios de clientes\nexport const clientesService = {\n  obtenerTodos: () => api.get('/clientes'),\n  obtenerPorId: id => api.get(`/clientes/${id}`),\n  crear: data => api.post('/clientes', data),\n  actualizar: (id, data) => api.put(`/clientes/${id}`, data),\n  eliminar: id => api.delete(`/clientes/${id}`)\n};\n\n// Servicios de solicitudes\nexport const solicitudesService = {\n  obtenerTodos: () => api.get('/solicitudes'),\n  obtenerPorId: id => api.get(`/solicitudes/${id}`),\n  crear: data => api.post('/solicitudes', data),\n  actualizar: (id, data) => api.put(`/solicitudes/${id}`, data),\n  eliminar: id => api.delete(`/solicitudes/${id}`)\n};\n\n// Servicios de órdenes\nexport const ordenesService = {\n  obtenerTodos: () => api.get('/ordenes'),\n  obtenerPorId: id => api.get(`/ordenes/${id}`),\n  crear: data => api.post('/ordenes', data),\n  actualizar: (id, data) => api.put(`/ordenes/${id}`, data),\n  eliminar: id => api.delete(`/ordenes/${id}`)\n};\n\n// Servicios de inventario\nexport const inventarioService = {\n  obtenerTodos: () => api.get('/inventario'),\n  obtenerPorId: id => api.get(`/inventario/${id}`),\n  crear: data => api.post('/inventario', data),\n  actualizar: (id, data) => api.put(`/inventario/${id}`, data),\n  eliminar: id => api.delete(`/inventario/${id}`)\n};\n\n// Servicios de auditoría\nexport const auditoriaService = {\n  obtenerTodos: () => api.get('/auditoria')\n};\nexport default api;","map":{"version":3,"names":["axios","API_URL","api","create","baseURL","headers","maxRedirects","maxContentLength","maxBodyLength","interceptors","request","use","config","token","localStorage","getItem","Authorization","error","Promise","reject","response","_error$response","status","removeItem","window","location","href","authService","login","email","password","rol","post","logout","getUser","JSON","parse","getToken","clientesService","obtenerTodos","get","obtenerPorId","id","crear","data","actualizar","put","eliminar","delete","solicitudesService","ordenesService","inventarioService","auditoriaService"],"sources":["C:/Users/rjuli/Downloads/erp/frontend/src/utils/api.js"],"sourcesContent":["import axios from 'axios';\r\n\r\nconst API_URL = 'http://localhost:3001/api';\r\n\r\n// Crear instancia de axios\r\nconst api = axios.create({\r\n  baseURL: API_URL,\r\n  headers: {\r\n    'Content-Type': 'application/json'\r\n  },\r\n  maxRedirects: 5,\r\n  maxContentLength: 1048576,\r\n  maxBodyLength: 1048576\r\n});\r\n\r\n// Interceptor para agregar token a todas las solicitudes\r\napi.interceptors.request.use(\r\n  (config) => {\r\n    const token = localStorage.getItem('token');\r\n    if (token) {\r\n      // Limpiar headers previos\r\n      if (config.headers.Authorization) {\r\n        delete config.headers.Authorization;\r\n      }\r\n      config.headers.Authorization = `Bearer ${token}`;\r\n    }\r\n    return config;\r\n  },\r\n  (error) => Promise.reject(error)\r\n);\r\n\r\n// Interceptor para manejar errores de respuesta\r\napi.interceptors.response.use(\r\n  (response) => response,\r\n  (error) => {\r\n    if (error.response?.status === 403) {\r\n      localStorage.removeItem('token');\r\n      localStorage.removeItem('usuario');\r\n      window.location.href = '/login';\r\n    }\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n// Servicios de autenticación\r\nexport const authService = {\r\n  login: (email, password, rol) =>\r\n    api.post('/usuarios/auth/login', { email, password, rol }),\r\n  \r\n  logout: () => {\r\n    localStorage.removeItem('token');\r\n    localStorage.removeItem('usuario');\r\n  },\r\n\r\n  getUser: () => JSON.parse(localStorage.getItem('usuario')),\r\n  getToken: () => localStorage.getItem('token')\r\n};\r\n\r\n// Servicios de clientes\r\nexport const clientesService = {\r\n  obtenerTodos: () => api.get('/clientes'),\r\n  obtenerPorId: (id) => api.get(`/clientes/${id}`),\r\n  crear: (data) => api.post('/clientes', data),\r\n  actualizar: (id, data) => api.put(`/clientes/${id}`, data),\r\n  eliminar: (id) => api.delete(`/clientes/${id}`)\r\n};\r\n\r\n// Servicios de solicitudes\r\nexport const solicitudesService = {\r\n  obtenerTodos: () => api.get('/solicitudes'),\r\n  obtenerPorId: (id) => api.get(`/solicitudes/${id}`),\r\n  crear: (data) => api.post('/solicitudes', data),\r\n  actualizar: (id, data) => api.put(`/solicitudes/${id}`, data),\r\n  eliminar: (id) => api.delete(`/solicitudes/${id}`)\r\n};\r\n\r\n// Servicios de órdenes\r\nexport const ordenesService = {\r\n  obtenerTodos: () => api.get('/ordenes'),\r\n  obtenerPorId: (id) => api.get(`/ordenes/${id}`),\r\n  crear: (data) => api.post('/ordenes', data),\r\n  actualizar: (id, data) => api.put(`/ordenes/${id}`, data),\r\n  eliminar: (id) => api.delete(`/ordenes/${id}`)\r\n};\r\n\r\n// Servicios de inventario\r\nexport const inventarioService = {\r\n  obtenerTodos: () => api.get('/inventario'),\r\n  obtenerPorId: (id) => api.get(`/inventario/${id}`),\r\n  crear: (data) => api.post('/inventario', data),\r\n  actualizar: (id, data) => api.put(`/inventario/${id}`, data),\r\n  eliminar: (id) => api.delete(`/inventario/${id}`)\r\n};\r\n\r\n// Servicios de auditoría\r\nexport const auditoriaService = {\r\n  obtenerTodos: () => api.get('/auditoria')\r\n};\r\n\r\nexport default api;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}