{"ast":null,"code":"import axios from'axios';// Usar variable de entorno en producción (REACT_APP_API_URL).\n// Ej: REACT_APP_API_URL=https://mi-backend.onrender.com/api\nconst API_URL=process.env.REACT_APP_API_URL||'http://localhost:3001/api';// Crear instancia de axios\nconst api=axios.create({baseURL:API_URL,headers:{'Content-Type':'application/json'},maxRedirects:5,maxContentLength:1048576,maxBodyLength:1048576});// Interceptor para agregar token a todas las solicitudes\napi.interceptors.request.use(config=>{const token=localStorage.getItem('token');if(token){// Limpiar headers previos\nif(config.headers.Authorization){delete config.headers.Authorization;}config.headers.Authorization=\"Bearer \".concat(token);}return config;},error=>Promise.reject(error));// Interceptor para manejar errores de respuesta\napi.interceptors.response.use(response=>response,error=>{var _error$response;if(((_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.status)===403){localStorage.removeItem('token');localStorage.removeItem('usuario');window.location.href='/login';}return Promise.reject(error);});// Servicios de autenticación\nexport const authService={login:(email,password)=>api.post('/usuarios/auth/login',{email,password}),logout:()=>{localStorage.removeItem('token');localStorage.removeItem('usuario');},getUser:()=>JSON.parse(localStorage.getItem('usuario')),getToken:()=>localStorage.getItem('token')};// Servicios de clientes\nexport const clientesService={obtenerTodos:()=>api.get('/clientes'),obtenerPorId:id=>api.get(\"/clientes/\".concat(id)),crear:data=>api.post('/clientes',data),actualizar:(id,data)=>api.put(\"/clientes/\".concat(id),data),eliminar:id=>api.delete(\"/clientes/\".concat(id))};// Servicios de solicitudes\nexport const solicitudesService={obtenerTodos:()=>api.get('/solicitudes'),obtenerPorId:id=>api.get(\"/solicitudes/\".concat(id)),crear:data=>api.post('/solicitudes',data),actualizar:(id,data)=>api.put(\"/solicitudes/\".concat(id),data),eliminar:id=>api.delete(\"/solicitudes/\".concat(id))};// Servicios de órdenes\nexport const ordenesService={obtenerTodos:()=>api.get('/ordenes'),obtenerPorId:id=>api.get(\"/ordenes/\".concat(id)),crear:data=>api.post('/ordenes',data),actualizar:(id,data)=>api.put(\"/ordenes/\".concat(id),data),eliminar:id=>api.delete(\"/ordenes/\".concat(id))};// Servicios de inventario\nexport const inventarioService={obtenerTodos:()=>api.get('/inventario'),obtenerPorId:id=>api.get(\"/inventario/\".concat(id)),crear:data=>api.post('/inventario',data),actualizar:(id,data)=>api.put(\"/inventario/\".concat(id),data),eliminar:id=>api.delete(\"/inventario/\".concat(id))};// Servicios de auditoría\nexport const auditoriaService={obtenerTodos:()=>api.get('/auditoria')};// Servicios de usuarios\nexport const usuariosService={obtenerTodos:()=>api.get('/usuarios'),obtenerTecnicosActivos:()=>api.get('/usuarios/tecnicos/activos'),obtenerPorId:id=>api.get(\"/usuarios/\".concat(id)),crear:data=>api.post('/usuarios',data),actualizar:(id,data)=>api.put(\"/usuarios/\".concat(id),data),eliminar:id=>api.delete(\"/usuarios/\".concat(id))};export default api;","map":{"version":3,"names":["axios","API_URL","process","env","REACT_APP_API_URL","api","create","baseURL","headers","maxRedirects","maxContentLength","maxBodyLength","interceptors","request","use","config","token","localStorage","getItem","Authorization","concat","error","Promise","reject","response","_error$response","status","removeItem","window","location","href","authService","login","email","password","post","logout","getUser","JSON","parse","getToken","clientesService","obtenerTodos","get","obtenerPorId","id","crear","data","actualizar","put","eliminar","delete","solicitudesService","ordenesService","inventarioService","auditoriaService","usuariosService","obtenerTecnicosActivos"],"sources":["C:/Users/felip/Downloads/erp/erp/frontend/src/utils/api.js"],"sourcesContent":["import axios from 'axios';\r\n\r\n// Usar variable de entorno en producción (REACT_APP_API_URL).\r\n// Ej: REACT_APP_API_URL=https://mi-backend.onrender.com/api\r\nconst API_URL = process.env.REACT_APP_API_URL || 'http://localhost:3001/api';\r\n\r\n// Crear instancia de axios\r\nconst api = axios.create({\r\n  baseURL: API_URL,\r\n  headers: {\r\n    'Content-Type': 'application/json'\r\n  },\r\n  maxRedirects: 5,\r\n  maxContentLength: 1048576,\r\n  maxBodyLength: 1048576\r\n});\r\n\r\n// Interceptor para agregar token a todas las solicitudes\r\napi.interceptors.request.use(\r\n  (config) => {\r\n    const token = localStorage.getItem('token');\r\n    if (token) {\r\n      // Limpiar headers previos\r\n      if (config.headers.Authorization) {\r\n        delete config.headers.Authorization;\r\n      }\r\n      config.headers.Authorization = `Bearer ${token}`;\r\n    }\r\n    return config;\r\n  },\r\n  (error) => Promise.reject(error)\r\n);\r\n\r\n// Interceptor para manejar errores de respuesta\r\napi.interceptors.response.use(\r\n  (response) => response,\r\n  (error) => {\r\n    if (error.response?.status === 403) {\r\n      localStorage.removeItem('token');\r\n      localStorage.removeItem('usuario');\r\n      window.location.href = '/login';\r\n    }\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n// Servicios de autenticación\r\nexport const authService = {\r\n  login: (email, password) =>\r\n    api.post('/usuarios/auth/login', { email, password }),\r\n  \r\n  logout: () => {\r\n    localStorage.removeItem('token');\r\n    localStorage.removeItem('usuario');\r\n  },\r\n\r\n  getUser: () => JSON.parse(localStorage.getItem('usuario')),\r\n  getToken: () => localStorage.getItem('token')\r\n};\r\n\r\n// Servicios de clientes\r\nexport const clientesService = {\r\n  obtenerTodos: () => api.get('/clientes'),\r\n  obtenerPorId: (id) => api.get(`/clientes/${id}`),\r\n  crear: (data) => api.post('/clientes', data),\r\n  actualizar: (id, data) => api.put(`/clientes/${id}`, data),\r\n  eliminar: (id) => api.delete(`/clientes/${id}`)\r\n};\r\n\r\n// Servicios de solicitudes\r\nexport const solicitudesService = {\r\n  obtenerTodos: () => api.get('/solicitudes'),\r\n  obtenerPorId: (id) => api.get(`/solicitudes/${id}`),\r\n  crear: (data) => api.post('/solicitudes', data),\r\n  actualizar: (id, data) => api.put(`/solicitudes/${id}`, data),\r\n  eliminar: (id) => api.delete(`/solicitudes/${id}`)\r\n};\r\n\r\n// Servicios de órdenes\r\nexport const ordenesService = {\r\n  obtenerTodos: () => api.get('/ordenes'),\r\n  obtenerPorId: (id) => api.get(`/ordenes/${id}`),\r\n  crear: (data) => api.post('/ordenes', data),\r\n  actualizar: (id, data) => api.put(`/ordenes/${id}`, data),\r\n  eliminar: (id) => api.delete(`/ordenes/${id}`)\r\n};\r\n\r\n// Servicios de inventario\r\nexport const inventarioService = {\r\n  obtenerTodos: () => api.get('/inventario'),\r\n  obtenerPorId: (id) => api.get(`/inventario/${id}`),\r\n  crear: (data) => api.post('/inventario', data),\r\n  actualizar: (id, data) => api.put(`/inventario/${id}`, data),\r\n  eliminar: (id) => api.delete(`/inventario/${id}`)\r\n};\r\n\r\n// Servicios de auditoría\r\nexport const auditoriaService = {\r\n  obtenerTodos: () => api.get('/auditoria')\r\n};\r\n\r\n// Servicios de usuarios\r\nexport const usuariosService = {\r\n  obtenerTodos: () => api.get('/usuarios'),\r\n  obtenerTecnicosActivos: () => api.get('/usuarios/tecnicos/activos'),\r\n  obtenerPorId: (id) => api.get(`/usuarios/${id}`),\r\n  crear: (data) => api.post('/usuarios', data),\r\n  actualizar: (id, data) => api.put(`/usuarios/${id}`, data),\r\n  eliminar: (id) => api.delete(`/usuarios/${id}`)\r\n};\r\n\r\nexport default api;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}