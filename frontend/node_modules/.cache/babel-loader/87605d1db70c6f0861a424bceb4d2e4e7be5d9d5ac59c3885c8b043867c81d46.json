{"ast":null,"code":"import React,{useState,useRef,useEffect}from'react';import'../css/searchable-select.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SearchableSelect=_ref=>{var _options$find;let{name,value,onChange,options,placeholder='Buscar...',required=false,error=false,disabled=false,ariaLabel=''}=_ref;const[isOpen,setIsOpen]=useState(false);const[searchTerm,setSearchTerm]=useState('');const containerRef=useRef(null);const inputRef=useRef(null);// Filtrar opciones basado en búsqueda\nconst filteredOptions=options.filter(opt=>opt.label.toLowerCase().includes(searchTerm.toLowerCase()));// Obtener el label del valor seleccionado\nconst selectedLabel=((_options$find=options.find(opt=>opt.value===value))===null||_options$find===void 0?void 0:_options$find.label)||'';// Cerrar dropdown cuando se hace click fuera\nuseEffect(()=>{const handleClickOutside=event=>{if(containerRef.current&&!containerRef.current.contains(event.target)){setIsOpen(false);}};if(isOpen){document.addEventListener('mousedown',handleClickOutside);return()=>document.removeEventListener('mousedown',handleClickOutside);}},[isOpen]);// Limpiar búsqueda cuando se cierra\nuseEffect(()=>{if(!isOpen){setSearchTerm('');}else{// Focus en el input cuando se abre\nsetTimeout(()=>{var _inputRef$current;return(_inputRef$current=inputRef.current)===null||_inputRef$current===void 0?void 0:_inputRef$current.focus();},50);}},[isOpen]);const handleSelect=optionValue=>{onChange({target:{name,value:optionValue}});setIsOpen(false);setSearchTerm('');};return/*#__PURE__*/_jsxs(\"div\",{className:\"searchable-select-container \".concat(error?'error':'',\" \").concat(disabled?'disabled':''),ref:containerRef,children:[/*#__PURE__*/_jsxs(\"button\",{type:\"button\",className:\"searchable-select-trigger\",onClick:()=>!disabled&&setIsOpen(!isOpen),\"aria-haspopup\":\"listbox\",\"aria-expanded\":isOpen,\"aria-label\":ariaLabel||\"Seleccionar \".concat(name),disabled:disabled,children:[/*#__PURE__*/_jsx(\"span\",{className:\"selected-label\",children:selectedLabel||placeholder}),/*#__PURE__*/_jsx(\"svg\",{className:\"chevron \".concat(isOpen?'open':''),xmlns:\"http://www.w3.org/2000/svg\",width:\"16\",height:\"16\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",children:/*#__PURE__*/_jsx(\"polyline\",{points:\"6 9 12 15 18 9\"})})]}),isOpen&&/*#__PURE__*/_jsxs(\"div\",{className:\"searchable-select-dropdown\",role:\"listbox\",children:[/*#__PURE__*/_jsx(\"input\",{ref:inputRef,type:\"text\",className:\"searchable-select-input\",placeholder:placeholder,value:searchTerm,onChange:e=>setSearchTerm(e.target.value),\"aria-label\":\"Buscar \".concat(name)}),/*#__PURE__*/_jsx(\"div\",{className:\"searchable-select-options\",children:filteredOptions.length>0?filteredOptions.map(opt=>/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"searchable-select-option \".concat(value===opt.value?'selected':''),onClick:()=>handleSelect(opt.value),role:\"option\",\"aria-selected\":value===opt.value,children:opt.label},opt.value)):/*#__PURE__*/_jsx(\"div\",{className:\"searchable-select-empty\",children:\"No hay resultados\"})})]})]});};export default SearchableSelect;","map":{"version":3,"names":["React","useState","useRef","useEffect","jsx","_jsx","jsxs","_jsxs","SearchableSelect","_ref","_options$find","name","value","onChange","options","placeholder","required","error","disabled","ariaLabel","isOpen","setIsOpen","searchTerm","setSearchTerm","containerRef","inputRef","filteredOptions","filter","opt","label","toLowerCase","includes","selectedLabel","find","handleClickOutside","event","current","contains","target","document","addEventListener","removeEventListener","setTimeout","_inputRef$current","focus","handleSelect","optionValue","className","concat","ref","children","type","onClick","xmlns","width","height","viewBox","fill","stroke","strokeWidth","points","role","e","length","map"],"sources":["C:/Users/felip/Downloads/erp/erp/frontend/src/components/SearchableSelect.jsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\r\nimport '../css/searchable-select.css';\r\n\r\nconst SearchableSelect = ({ \r\n  name, \r\n  value, \r\n  onChange, \r\n  options, \r\n  placeholder = 'Buscar...', \r\n  required = false,\r\n  error = false,\r\n  disabled = false,\r\n  ariaLabel = ''\r\n}) => {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const containerRef = useRef(null);\r\n  const inputRef = useRef(null);\r\n\r\n  // Filtrar opciones basado en búsqueda\r\n  const filteredOptions = options.filter(opt => \r\n    opt.label.toLowerCase().includes(searchTerm.toLowerCase())\r\n  );\r\n\r\n  // Obtener el label del valor seleccionado\r\n  const selectedLabel = options.find(opt => opt.value === value)?.label || '';\r\n\r\n  // Cerrar dropdown cuando se hace click fuera\r\n  useEffect(() => {\r\n    const handleClickOutside = (event) => {\r\n      if (containerRef.current && !containerRef.current.contains(event.target)) {\r\n        setIsOpen(false);\r\n      }\r\n    };\r\n\r\n    if (isOpen) {\r\n      document.addEventListener('mousedown', handleClickOutside);\r\n      return () => document.removeEventListener('mousedown', handleClickOutside);\r\n    }\r\n  }, [isOpen]);\r\n\r\n  // Limpiar búsqueda cuando se cierra\r\n  useEffect(() => {\r\n    if (!isOpen) {\r\n      setSearchTerm('');\r\n    } else {\r\n      // Focus en el input cuando se abre\r\n      setTimeout(() => inputRef.current?.focus(), 50);\r\n    }\r\n  }, [isOpen]);\r\n\r\n  const handleSelect = (optionValue) => {\r\n    onChange({\r\n      target: {\r\n        name,\r\n        value: optionValue\r\n      }\r\n    });\r\n    setIsOpen(false);\r\n    setSearchTerm('');\r\n  };\r\n\r\n  return (\r\n    <div \r\n      className={`searchable-select-container ${error ? 'error' : ''} ${disabled ? 'disabled' : ''}`}\r\n      ref={containerRef}\r\n    >\r\n      <button\r\n        type=\"button\"\r\n        className=\"searchable-select-trigger\"\r\n        onClick={() => !disabled && setIsOpen(!isOpen)}\r\n        aria-haspopup=\"listbox\"\r\n        aria-expanded={isOpen}\r\n        aria-label={ariaLabel || `Seleccionar ${name}`}\r\n        disabled={disabled}\r\n      >\r\n        <span className=\"selected-label\">\r\n          {selectedLabel || placeholder}\r\n        </span>\r\n        <svg \r\n          className={`chevron ${isOpen ? 'open' : ''}`}\r\n          xmlns=\"http://www.w3.org/2000/svg\" \r\n          width=\"16\" \r\n          height=\"16\" \r\n          viewBox=\"0 0 24 24\" \r\n          fill=\"none\" \r\n          stroke=\"currentColor\" \r\n          strokeWidth=\"2\"\r\n        >\r\n          <polyline points=\"6 9 12 15 18 9\"></polyline>\r\n        </svg>\r\n      </button>\r\n\r\n      {isOpen && (\r\n        <div className=\"searchable-select-dropdown\" role=\"listbox\">\r\n          <input\r\n            ref={inputRef}\r\n            type=\"text\"\r\n            className=\"searchable-select-input\"\r\n            placeholder={placeholder}\r\n            value={searchTerm}\r\n            onChange={(e) => setSearchTerm(e.target.value)}\r\n            aria-label={`Buscar ${name}`}\r\n          />\r\n          \r\n          <div className=\"searchable-select-options\">\r\n            {filteredOptions.length > 0 ? (\r\n              filteredOptions.map((opt) => (\r\n                <button\r\n                  key={opt.value}\r\n                  type=\"button\"\r\n                  className={`searchable-select-option ${value === opt.value ? 'selected' : ''}`}\r\n                  onClick={() => handleSelect(opt.value)}\r\n                  role=\"option\"\r\n                  aria-selected={value === opt.value}\r\n                >\r\n                  {opt.label}\r\n                </button>\r\n              ))\r\n            ) : (\r\n              <div className=\"searchable-select-empty\">No hay resultados</div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SearchableSelect;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}